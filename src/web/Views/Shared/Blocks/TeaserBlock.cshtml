@using EPiServer.Core
@using OxxCommerceStarterKit.Web.Controllers
@model OxxCommerceStarterKit.Web.Models.Blocks.TeaserBlock
@{ bool showLink = !ContentReference.IsNullOrEmpty(Model.Link) && !(ViewContext.Controller is PreviewController);}    
<div class="border">
    @*Link the teaser block only if a link has been set and not displayed in preview*@
    @if (showLink)
    {
        <a href="@Url.ContentUrl(Model.Link)" title="@Model.Heading">
            <h2 @Html.EditAttributes(x => x.Heading)>@Model.Heading</h2>
            <p @Html.EditAttributes(x => x.Text)>@Model.Text</p>
            <div @Html.EditAttributes(x => x.Image)><img src="@Url.ContentUrl(Model.Image)?width=368&height=176&scale=canvas" /></div>
        </a>

    }
    else
    {
    <h2 @Html.EditAttributes(x => x.Heading)>@Model.Heading</h2>
    <p @Html.EditAttributes(x => x.Text)>@Model.Text</p>
    <div @Html.EditAttributes(x => x.Image)><img src="@Url.ContentUrl(Model.Image)?width=368&height=176&scale=canvas" /></div>
    }

</div>
